{% extends "base.html" %}
{% load static %}
{% block title %}산재 정보 추가{% endblock %}

{% block script1 %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/member/mypage_individual_add.js' %}"></script>
{% endblock %}
{% block contents %}

<form action="" method="post">
{% csrf_token %}
{% if error %}
<div class="alert alert-danger" role="alert">
    {{ error }}
</div>
{% endif %}
<h2>산재 정보 추가</h2>
<div class="mb-3">
    <label for="i_title" class="form-label">제목:</label>
    <input type="text" class="form-control" placeholder="제목을 입력하세요." id="i_title" name="i_title">
</div>

<select id="i_industry_type1" onchange="changeCategory2()" class="form-control">
    <option value="">중분류1 선택</option>
</select>

<select id="i_industry_type2" class="form-control mt-2">
    <option value="">중분류2 선택</option>
</select>

<div class="mb-3">
    <label for="i_accident_date" class="form-label">*재해일자 :</label>
    <input 
        type="text" 
        id="i_accident_date" 
        name="i_accident_date"
        class="form-control"
        placeholder="YYYY-MM-DD">
</div>
<div class="mb-3">
    <label for="i_address" class="form-label">*발생 주소 :</label>
    <input 
        type="text" 
        class="form-control" 
        id="i_address" 
        name="i_address" 
        placeholder="발생 주소를 입력해주세요."
        readonly
        onclick="searchAddress('i_address')">
</div>
<!-- 발생형태/질병 모달 버튼 -->
<button class="btn btn-secondary" type="button" data-bs-toggle="modal" data-bs-target="#typeModal">
    발생형태 / 질병 선택
</button>

<!-- 선택 결과 표시 -->
<input type="text" id="selectedType" class="form-control mt-2" readonly>

<!-- hidden inputs -->
<input type="hidden" id="i_injury" name="i_injury">
<input type="hidden" id="i_disease_type" name="i_disease_type">

<hr>


<button type="submit" class="btn btn-primary">등록하기</button>
</form>


<!-- Modal -->
<div class="modal fade" id="typeModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">발생형태 / 질병 선택</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        
        <!-- 발생형태 -->
        <label class="fw-bold">발생형태</label>
        <select id="occurrenceType" class="form-select mb-3">
            <option value="">선택</option>
            <option>떨어짐</option>
            <option>넘어짐</option>
            <option>부딪힘</option>
            <option>끼임</option>
            <option>맞음</option>
        </select>

        <!-- 질병 -->
        <label class="fw-bold">질병</label>
        <select id="diseaseType" class="form-select">
            <option value="">선택</option>
            <option>근골격계질환</option>
            <option>호흡기질환</option>
            <option>뇌심혈관질환</option>
            <option>청각장애</option>
            <option>피부질환</option>
        </select>

      </div>

      <div class="modal-footer">
        <button class="btn btn-primary" id="applyType" data-bs-dismiss="modal">적용</button>
      </div>

    </div>
  </div>
</div>


{% endblock %}