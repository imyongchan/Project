{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{{ name }} - 산재지정의료기관 상세</title>
  <link rel="stylesheet" href="{% static 'CSS/hospital/hospital_detail.css' %}">
</head>

<body
  data-kakao-key="{{ KAKAO_KEY }}"
  data-lat="{{ lat|default:0 }}"
  data-lng="{{ lng|default:0 }}"
  data-hospital-name="{{ name }}"
  data-hospital-id="{{ hospital_id }}"
>

  <h2 class="page-title">주변 산재지정의료기관 검색</h2>

  <!-- 1. 의료기관 기본 정보 영역 -->
  <section class="section-box">

    <div class="section-content">
      <div class="section-header">
        <div class="hospital-title">
          <span class="hospital-name">{{ name }}</span>
        </div>
        
        <div class="hospital-meta">
          <span class="meta-distance">
            거리 :
            {% if distance_km is not None %}
              {{ distance_km }}km.
            {% else %}
              -
            {% endif %}
          </span>

          <span class="meta-rating">{{ avg_rating }}</span>
          <span class="meta-stars">★★★★★</span>
          <span class="meta-review">리뷰 {{ review_count }}</span>
        </div>
      </div>

      <div class="hospital-info-row">
        <div class="info-label">주소</div>
        <div class="info-value">{{ road_address|default:address }}</div>
      </div>
      <div class="hospital-info-row">
        <div class="info-label">전화번호</div>
        <div class="info-value">{{ tel|default:"-" }}</div>
      </div>
    </div>
  </section>

  <!-- 기본정보 + 위치 -->
  <section class="section-box">
    <div class="section-inner-title">기본정보</div>
    <div class="basic-info-box">
      <div class="basic-info-line">
        <span class="basic-label">종별 :</span>
        <span class="basic-example">ex) 요양병원</span>
      </div>
      <div class="basic-info-line">
        <span class="basic-label">부가기능 :</span>
        <span class="basic-example">ex) 진폐요양</span>
      </div>
      <div class="basic-info-line">
        <span class="basic-label">재활인증 (만료일) :</span>
        <span class="basic-example">2026-12-31</span>
      </div>
      <div class="basic-info-line">
        <span class="basic-label">진료제한 (기간) :</span>
        <span class="basic-example">-</span>
      </div>
      <div class="basic-info-line">
        <span class="basic-label">의료기관평가 (평가연도) :</span>
        <span class="basic-example">-</span>
      </div>
    </div>
  </section>

  <!-- 2. 위치(지도) 영역 -->
  <section class="section-box">

    <div class="section-content">
      <div class="section-inner-title">위치</div>
      <div id="detail-map" class="map-area"></div>
    </div>
  </section>

  <!-- 리뷰 영역 -->
  <section class="section-box review-section">

    <div class="section-content">
      <div class="section-inner-title">리뷰</div>

      <!-- 별점 + 입력 -->
      <div class="review-input-wrapper">
        <div class="review-rating-row">
          <span class="review-label">리뷰</span>
          <div class="star-group" id="star-group">
            <!-- data-value 로 점수 부여 -->
            <span class="star" data-value="1">★</span>
            <span class="star" data-value="2">★</span>
            <span class="star" data-value="3">★</span>
            <span class="star" data-value="4">★</span>
            <span class="star" data-value="5">★</span>
            <span class="star-score" id="star-score">0</span>
          </div>
        </div>

        <textarea id="review-text" class="review-textarea"
                  placeholder="리뷰를 입력하세요."></textarea>

        <button type="button" id="btn-review-submit" class="btn-review-submit">
          리뷰 등록하기
        </button>
      </div>

      <!-- 기존 리뷰 목록 -->
      <div class="review-list" id="review-list">
        <!-- 예시 카드 -->
        <article class="review-item">
          <div class="review-header">
            <span class="review-writer">작성자ID: 여기 병원 별로1….</span>
            <span class="review-date">2025-10-23</span>
          </div>
          <p class="review-body">리뷰 내용 예시입니다.</p>
        </article>

        <article class="review-item">
          <div class="review-header">
            <span class="review-writer">작성자ID: 여기 병원 별로2….</span>
            <span class="review-date">2023-10-23</span>
            <button type="button" class="btn-review-delete">삭제</button>
          </div>
          <p class="review-body">리뷰 내용 예시입니다.</p>
        </article>

        <article class="review-item">
          <div class="review-header">
            <span class="review-writer">작성자ID: 여기 병원 별로3….</span>
            <span class="review-date">2022-10-23</span>
          </div>
          <p class="review-body">리뷰 내용 예시입니다.</p>
        </article>
      </div>

      <div class="review-more-wrapper">
        <button type="button" id="btn-review-more" class="btn-review-more">
          더보기
        </button>
      </div>
    </div>
  </section>

  <!-- 분리된 JS 파일 로드 -->
  <script src="{% static 'JS/hospital/hospital_detail.js' %}"></script>
  <script src="{% static 'JS/hospital/hospital_review.js' %}"></script>
</body>
</html>
