{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주변 산재 검색</title>
  <link rel="stylesheet" href="{% static 'CSS/search/search.css' %}">
</head>
<body>

<h2>주변 산재 검색</h2>

<div class="search-box">
  <div class="search-row">
    <label>위치선택:</label>
    <button id="homeBtn">집</button>
    <button id="workBtn">근무지</button>

    <div class="dropdown">
      <button id="incidentBtn">사고지역 ▼</button>
      <div id="incidentMenu" class="dropdown-menu">
        {% for a in accident_list %}
          <div data-x="{{ a.x }}" data-y="{{ a.y }}">
            {{ a.nickname }} ({{ a.address }})
          </div>
        {% empty %}
          <div>등록된 사고지역 없음</div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="count-box">
    총 발생건수: <span id="totalCount">0</span>
  </div>
</div>

<div class="section-box">
  <div class="section-title">
    <h3>근무지/산업재해 상황</h3>
    주변 산업재해 발생 현황을 확인하세요
  </div>
</div>

<div class="map-placeholder" style="width:70%;height:500px;"></div>

<script>
  const KAKAO_KEY = "{{ KAKAO_KEY }}";

  const HOME_TM = {
    x: Number("{{ home.x|default:'0' }}"),
    y: Number("{{ home.y|default:'0' }}")
  };
  const WORK_TM = {
    x: Number("{{ work.x|default:'0' }}"),
    y: Number("{{ work.y|default:'0' }}")
  };
</script>

<script src="{% static 'js/search/search.js' %}"></script>
</body>
</html>
