$(document).ready(function () {

    /* -------------------------------
       ì—…ì¢… ëŒ€ë¶„ë¥˜/ì¤‘ë¶„ë¥˜
     --------------------------------*/
    const industryMap = {
        "ê´‘ì—…": ["ì„íƒ„ê´‘ì—… ë° ì±„ì„ì—…", "ì„íšŒì„Â·ê¸ˆì†Â·ë¹„ê¸ˆì†ê´‘ì—… ë° ê¸°íƒ€ê´‘ì—…"],
        "ì œì¡°ì—…": [
            "ì‹ë£Œí’ˆì œì¡°ì—…", "ì„¬ìœ  ë° ì„¬ìœ ì œí’ˆ ì œì¡°ì—…", "ëª©ì¬ ë° ì¢…ì´ì œí’ˆ ì œì¡°ì—…",
            "ì¶œíŒÂ·ì¸ì‡„Â·ì œì§€ì—…", "í™”í•™ ë° ê³ ë¬´ì œí’ˆ ì œì¡°ì—…", "ì˜ì•½í’ˆÂ·í™”ì¥í’ˆÂ·ì—°íƒ„Â·ì„ìœ ì œí’ˆì œì¡°ì—…",
            "ê¸°ê³„ê¸°êµ¬Â·ê¸ˆì†Â·ë¹„ê¸ˆì†ê´‘ë¬¼ì œí’ˆì œì¡°ì—…", "ê¸ˆì†ì œë ¨ì—…",
            "ì „ê¸°ê¸°ê³„ê¸°êµ¬Â·ì •ë°€ê¸°êµ¬Â·ì „ìì œí’ˆì œì¡°ì—…", "ìë™ì°¨ ë° ìˆ˜ë¦¬ì—…",
            "ìˆ˜ì œí’ˆ ë° ê¸°íƒ€ì œí’ˆ ì œì¡°ì—…"
        ],
        "ì „ê¸°Â·ê°€ìŠ¤Â·ì¦ê¸° ë° ìˆ˜ë„ì‚¬ì—…": ["ì „ê¸°Â·ê°€ìŠ¤Â·ì¦ê¸° ë° ìˆ˜ë„ì‚¬ì—…"],
        "ê±´ì„¤ì—…": ["ê±´ì„¤ì—…"],
        "ìš´ìˆ˜Â·ì°½ê³  ë° í†µì‹ ì—…": ["ì² ë„Â·í•­ê³µÂ·ì°½ê³ Â·ìš´ìˆ˜ê´€ë ¨ì„œë¹„ìŠ¤ì—…", "ìœ¡ìƒ ë° ìˆ˜ìƒìš´ìˆ˜ì—…", "í†µì‹ ì—…"],
        "ì„ì—…": ["ì„ì—…"],
        "ì–´ì—…": ["ì–´ì—…"],
        "ë†ì—…": ["ë†ì—…"],
        "ê¸ˆìœµ ë° ë³´í—˜ì—…": ["ê¸ˆìœµ ë° ë³´í—˜ì—…"],
        "ê¸°íƒ€ì˜ ì‚¬ì—…": [
            "ì‹œì„¤ê´€ë¦¬ë°ì‚¬ì—…ì§€ì›ì„œë¹„ìŠ¤ì—…","í•´ì™¸íŒŒê²¬ì","ì „ë¬¸Â·ë³´ê±´Â·êµìœ¡Â·ì—¬ê°€ê´€ë ¨ì„œë¹„ìŠ¤ì—…",
            "ë„ì†Œë§¤Â·ìŒì‹Â·ìˆ™ë°•ì—…","ë¶€ë™ì‚°ì—… ë° ì„ëŒ€ì—…","êµ­ê°€ ë° ì§€ë°©ìì¹˜ë‹¨ì²´ì˜ ì‚¬ì—…",
            "ì£¼í•œë¯¸êµ°","ê¸°íƒ€ì˜ ê°ì¢…ì‚¬ì—…"
        ]
    };

    const occList = [
        "ë–¨ì–´ì§","ë„˜ì–´ì§","ë¶€ë”ªí˜","ë¬¼ì²´ì— ë§ìŒ","ë¬´ë„ˆì§","ë¼ì„","ì ˆë‹¨Â·ë² ì„Â·ì°”ë¦¼","ê°ì „",
        "í­ë°œÂ·íŒŒì—´","í™”ì¬","ê¹”ë¦¼Â·ë’¤ì§‘í˜","ì´ìƒì˜¨ë„ ë¬¼ì²´ì ‘ì´‰","ë¹ ì§Â·ìµì‚¬","ê´‘ì‚°ì‚¬ê³ ",
        "ë¶ˆê· í˜• ë° ë¬´ë¦¬í•œ ë™ì‘","í™”í•™ë¬¼ì§ˆ ëˆ„ì¶œÂ·ì ‘ì´‰","ì‚°ì†Œê²°í•","ì‚¬ì—…ì¥ë‚´ êµí†µì‚¬ê³ ",
        "ì‚¬ì—…ì¥ì™¸ êµí†µì‚¬ê³ ","ì—…ë¬´ìƒì§ˆë³‘","ì²´ìœ¡í–‰ì‚¬ë“±ì˜ ì‚¬ê³ ","í­ë ¥í–‰ìœ„","ë™ë¬¼ìƒí•´",
        "ê¸°íƒ€","ë¶„ë¥˜ë¶ˆëŠ¥"
    ];

    const disList = [
        "ì§ì—…ë³‘","ì§„íì¦","ì†ŒìŒì„±ë‚œì²­","ì´ìƒê¸°ì••","ì§„ë™ì¥í•´","ë¬¼ë¦¬ì ì¸ì ê¸°íƒ€","ì´í™©í™”íƒ„ì†Œ",
        "íŠ¸ë¦¬í´ë¡œë¡œì—í‹¸ë Œ(TCE)","ê¸°íƒ€ìœ ê¸°í™”í•©ë¬¼","ë²¤ì  ","íƒ€ë¥´","ì—¼í™”ë¹„ë‹","ë””ì´ì†Œì‹œì•„ë„¤ì´íŠ¸",
        "ì„ë©´","ê¸°íƒ€í™”í•™ë¬¼ì§ˆ","ì—°","ìˆ˜ì€","í¬ë¡¬","ì¹´ë“œë®´","ë§ê°„","ê°ì—¼ì„±ì§ˆí™˜","ë…ì„±ê°„ì—¼",
        "ì§ì—…ì„±í”¼ë¶€ì§ˆí™˜","ì§ì—…ì„±ì•”","ì§ì—…ë³‘ ê¸°íƒ€","ì‘ì—…ê´€ë ¨ì„± ì§ˆë³‘","ë‡Œí˜ˆê´€ì§ˆí™˜","ì‹¬ì¥ì§ˆí™˜",
        "ë‡ŒÂ·ì‹¬í˜ˆê´€ì§ˆí™˜","ì‹ ì²´ë¶€ë‹´ì‘ì—…","ë¹„ì‚¬ê³ ì„±ìš”í†µ","ì‚¬ê³ ì„±ìš”í†µ","ìˆ˜ê·¼ê´€ì¦í›„êµ°","ê°„ì§ˆí™˜",
        "ì •ì‹ ì§ˆí™˜","ì‘ì—…ê´€ë ¨ì„± ê¸°íƒ€"
    ];

    /* -------------------------------
       ì˜µì…˜ ì±„ìš°ê¸°
     --------------------------------*/
    const $cat1 = $("#i_industry_type1");
    Object.keys(industryMap).forEach(k => {
        $cat1.append(`<option value="${k}">${k}</option>`);
    });

    $("#i_industry_type1").on("change", function () {
        const selected = $(this).val();
        const $cat2 = $("#i_industry_type2");

        $cat2.empty().append(`<option value="">ì¤‘ë¶„ë¥˜ ì„ íƒ</option>`);
        if (!selected) return;

        industryMap[selected].forEach(item => {
            $cat2.append(`<option value="${item}">${item}</option>`);
        });
    });

    occList.forEach(item => {
        $("#i_injury").append(`<option value="${item}">${item}</option>`);
    });

    disList.forEach(item => {
        $("#i_disease").append(`<option value="${item}">${item}</option>`);
    });

    /* -------------------------------
       ğŸ”„ í•„í„° ê°’ ë³µì›
     --------------------------------*/
    const params = new URLSearchParams(window.location.search);

    const industry1 = params.get("industry1");
    if (industry1) {
        $("#i_industry_type1").val(industry1).trigger("change");
    }

    const industry2 = params.get("industry2");
    if (industry2) {
        setTimeout(() => {
            $("#i_industry_type2").val(industry2);
        }, 0);
    }

    const injury = params.get("injury");
    if (injury) $("#i_injury").val(injury);

    const disease = params.get("disease");
    if (disease) $("#i_disease").val(disease);

    const accidentDate = params.get("accident_date");
    if (accidentDate) {
        $("input[name='accident_date']").val(accidentDate);
    }
});
