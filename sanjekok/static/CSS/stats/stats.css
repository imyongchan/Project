/* =========================
   변수 및 기본 설정 (새로운 팔레트)
   ========================= */
:root {
    /* 기존 주 색상 (액센트) */
    --color-primary: #ff9800; /* 액센트 주황색 (기존 유지) */
    --color-primary-light: #ffb74d; /* 밝은 주황색 */
    --color-primary-dark: #e68900; /* 어두운 주황색 (호버용) */

    /* 새로운 보조 색상 (청록색 계열, 차트, 보조 버튼) */
    --color-secondary: #00bcd4; /* 청록색 */
    --color-secondary-light: #4dd0e1; /* 밝은 청록색 */
    --color-secondary-dark: #0097a7; /* 어두운 청록색 (호버용) */

    /* 새로운 경고 색상 (위험도 강조) */
    --color-danger: linear-gradient(135deg, #ffe8c7, #d8f7f8);
    --color-danger-light: #fddedb; /* 밝은 진홍색 배경 */
    --color-danger-dark: #f3a752; /* 어두운 진홍색 */

    /* 중립 색상 */
    --color-text-dark: #2c3e50; /* 기본 텍스트 (짙은 네이비) */
    --color-text-light: #7f8c8d; /* 보조 텍스트 (회색) */
    --color-background: #f4f7f9; /* 페이지 배경 */
    --color-card-bg: #ffffff; /* 카드 배경 */
    --color-border: #e0e6ed; /* 테두리 */
    
    /* 그림자 */
    --shadow-subtle: 0 4px 12px rgba(0, 0, 0, 0.04);
    --shadow-medium: 0 8px 20px rgba(0, 0, 0, 0.08);
}

body {
    background-color: var(--color-background);
}

/* =========================
   전체 레이아웃
   ========================= */
.stats-container {
    width: 90%;
    max-width: 1500px;
    margin: 60px auto 80px;
    padding: 0 20px;
    box-sizing: border-box;
    font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
    color: var(--color-text-dark);
}

.hidden {
    display: none !important;
}


/* =========================
   1. 프로필 박스
   ========================= */
.profile-box {
    background: var(--color-card-bg);
    border-radius: 18px;
    padding: 30px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: var(--shadow-medium);
    border: none;
    margin-bottom: 40px;
}

.profile-left {
    display: flex;
    align-items: flex-start;
    gap: 25px;
}



.profile-info h2 {
    font-size: 28px;
    font-weight: 800;
    margin: 0 0 10px;
    color: var(--color-text-dark);
    letter-spacing: -0.5px;
}

.profile-info p {
    font-size: 16px;
    color: var(--color-text-light);
    margin: 3px 0;
    line-height: 1.6;
}

.profile-info strong {
    color: var(--color-text-dark);
    font-weight: 700;
    display: inline-block;
    width: 80px;
}

/* 상세 정보 (나의 산재) */
#injuryDetail {
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px dashed var(--color-border);
}
#injuryDetail p {
    font-size: 15px;
    margin: 2px 0;
}


.profile-edit-btn {
    position: relative;
}

.profile-edit-btn button {
    /* 주황색 유지: 핵심 상호작용 버튼 */
    background: #23333d;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 12px 22px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.1s;
    box-shadow: 0 4px 8px rgba(255, 152, 0, 0.3);
}

.profile-edit-btn button:hover {
    background: var(--color-primary-dark);
    transform: translateY(-1px);
}

/* 드롭다운 스타일 */
.dropdown {
    position: absolute;
    right: 0;
    top: 100%;
    margin-top: 10px;
    background: var(--color-card-bg);
    border: 1px solid var(--color-border);
    width: 200px;
    border-radius: 10px;
    list-style: none;
    padding: 8px 0;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    z-index: 20;
}

.dropdown li {
    padding: 12px 18px;
    cursor: pointer;
    font-size: 15px;
    color: var(--color-text-dark);
    transition: background 0.2s ease;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.dropdown li:hover {
    background: var(--color-background);
}


/* =========================
   2. 분석 기간 영역
   ========================= */
.period-section {
    background: var(--color-card-bg);
    border-radius: 18px;
    padding: 24px 35px;
    box-shadow: var(--shadow-subtle);
    border: 1px solid var(--color-border);
    margin-bottom: 40px;
}

.period-section h3 {
    font-size: 20px;
    font-weight: 700;
    color: var(--color-text-dark);
    margin-bottom: 15px;
    padding-bottom: 5px;
    border-bottom: 2px solid var(--color-border);
}

.period-buttons {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.period-btn {
    background:#23333d;
    border: 1px solid var(--color-border);
    color: #fff;
    padding: 12px 25px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 15px;
    transition: all 0.3s ease;
    cursor: pointer;
}

.period-btn:hover {
    /* 보조색 (청록색)으로 호버 변경 */
    background: var(--color-primary); 

}

.period-btn.active {
    /* 주 색상 (주황색) 유지: 현재 선택된 상태 */
    background: var(--color-primary);
    color: #fff;
    border: 1px solid var(--color-primary);
    box-shadow: 0 4px 8px rgba(255, 152, 0, 0.3);
}


/* =========================
   3. 통계 시각화 영역 (카드/그리드)
   ========================= */

.stats-visual {
    margin-top: 30px;
}

/* 카드들이 배치되는 그리드 */
.visual-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}


/* 기본 카드 스타일 */
.visual-card {
    background: var(--color-card-bg);
    border-radius: 18px;
    padding: 25px;
    box-shadow: var(--shadow-subtle);
    border: 1px solid var(--color-border);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* 카드 제목 */
.visual-card h3 {
    font-size: 24px;
    font-weight: 800;
    margin: 0 0 5px;
    color: var(--color-text-dark);
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 2px solid var(--color-background);
    padding-bottom: 8px;
}

/* 카드 상단 설명 텍스트 */
.visual-card p {
    margin: 0;
    font-size: 14px;
    color: var(--color-text-light);
}

/* 상단 재해율 / 사망만인율 카드 (Small Card) */
.visual-card.small {
    min-height: 140px;
    justify-content: center;
    align-items: flex-start;
}

.visual-card.small h3 {
    font-size: 28px;
    padding-bottom: 0;
    border-bottom: none;
}

.visual-card.small p:first-of-type { 
    font-size: 22px;
    font-weight: 700;
    /* 핵심 통계는 주 색상 유지 */
    color: var(--color-primary); 
    margin-bottom: 10px;
}


/* =========================
   3-1. 특정 카드들 1열 전체 사용
   ========================= */

/* 연령대별, 발생형태, 질병형태, 종합위험도 카드들은 1열 전체 사용 */
#card-age,
#card-age-fatal,
#card-injury,
#card-injury-fatal,
#card-disease,
#card-disease-fatal,
#card-risk {
    grid-column: 1 / 3;
}


/* =========================
   4. 차트 크기 조정
   ========================= */

/* 모든 카드 안의 차트 (기본 높이) */
.visual-card canvas {
    width: 100%;
    height: 300px !important;
    margin-top: 15px;
    display: block;
}

/* 1열 전체를 사용하는 카드의 차트 */
#card-age canvas,
#card-age-fatal canvas,
#card-injury canvas,
#card-injury-fatal canvas,
#card-disease canvas,
#card-disease-fatal canvas {
    height: 400px !important;
}

/* =========================
   5. 종합 위험도 카드 스타일 (하이라이트)
   ========================= */

#card-risk {
    /* 경고/위험 색상(Danger) 사용 */
    border: 2px solid var(--color-danger); 
    background-color: #fef8f8; /* 밝은 빨간색 배경으로 강조 */
    box-shadow: 0 0 25px rgba(231, 76, 60, 0.15); /* 경고색으로 그림자 변경 */
}

#card-risk .risk-header h3 {
    /* 경고/위험 색상(Danger) 사용 */
    color: var(--color-danger); 
    border-bottom: 2px solid var(--color-danger-light);
    padding-bottom: 10px;
    margin-bottom: 15px;
}

#card-risk .risk-condition{
    font-size: 17px;
    color: var(--color-text-dark);
    margin: 6px 0 20px;
    line-height: 1.6;
    font-weight: 500;
}

/* 카드 안에서 2개의 박스를 세로로 */
#card-risk .risk-grid{
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin-top: 10px;
}

/* 박스 톤 통일 */
#card-risk .risk-category{
    background: var(--color-card-bg);
    border: 1px solid var(--color-border);
    border-radius: 14px;
    padding: 20px;
    box-shadow: var(--shadow-subtle);
}

/* 타이틀 */
#card-risk .risk-category-title{
    font-size: 18px;
    font-weight: 700;
    color: var(--color-text-dark);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 1px solid var(--color-background);
    padding-bottom: 8px;
}

#card-risk .risk-icon{ font-size: 20px; }

/* 리스트(왼쪽) + 차트(오른쪽) */
#card-risk .risk-category-inner{
    display: grid;
    grid-template-columns: minmax(0, 1fr) 450px;
    gap: 25px;
    align-items: center;
}

/* 리스트 스타일 */
#card-risk .risk-list{
    min-width: 0;
    padding-right: 15px;
    border-right: 1px solid var(--color-border);
}

#card-risk .risk-item{
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px dashed var(--color-border);
}
#card-risk .risk-item:last-child{ border-bottom: 0; }

#card-risk .risk-rank{
    /* 경고/위험 색상(Danger)으로 순위 아이콘 변경 */
    width: 28px;
    height: 28px;
    background-color: #f1948a; 
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 800;
    flex-shrink: 0;
}

#card-risk .risk-name{
    flex: 1;
    margin: 0 15px;
    font-size: 16px;
    font-weight: 700;
    color: var(--color-text-dark);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#card-risk .risk-percentage{
    /* 경고/위험 색상(Danger)으로 백분율 색상 변경 */
    font-size: 16px;
    font-weight: 800;
    color: var(--color-text-dark);
    flex-shrink: 0;
    width: 50px;
    text-align: right;
}

/* 차트 랩: 폭/높이 확보 */
#card-risk .risk-chart-wrap{
    width: 450px;
    height: 380px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

/* 위험도 도넛 차트만 크게(전역 canvas 규칙 덮어쓰기) */
#card-risk .risk-chart-wrap canvas{
    width: 100% !important;
    height: 380px !important;
    margin-top: 0 !important;
}

/* 위험도 데이터 없을 때 */
#riskNoData {
    font-size: 18px;
    color: var(--color-text-light);
    text-align: center;
    padding: 50px;
    background-color: var(--color-background);
    border-radius: 12px;
}


/* =========================
   6. 결과 박스 (Result Box) 스타일 개선
   ========================= */
.result-box {
    /* 보조색(청록색) 계열로 변경하여 일반적인 정보/성공 메시지 강조 */
    background-color: #e0f7fa; 
    border-left: 6px solid var(--color-secondary); 
    padding: 18px 22px;
    margin-top: 15px;
    font-size: 18px;
    color: var(--color-text-dark);
    display: flex;
    align-items: center;
    gap: 10px;
    border-radius: 8px;
    font-weight: 600;
    line-height: 1.4;
}

.result-box i {
    /* 보조색(청록색) 사용 */
    color: var(--color-secondary);
    font-size: 20px;
    flex-shrink: 0;
}


/* =========================
   7. 반응형 디자인 (변경 없음)
   ========================= */

@media (max-width: 1200px) {
    .stats-container {
        width: 95%;
    }
}

@media (max-width: 900px){
    /* 2열 레이아웃을 1열로 변경 */
    .visual-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    /* 1열 전체 사용 카드들 (이미 1열이라 추가 조정 필요 없음) */
    #card-age, #card-age-fatal, #card-injury, #card-injury-fatal, #card-disease, #card-disease-fatal, #card-risk {
        grid-column: 1 / 2 !important; 
    }

    /* 프로필 박스 세로 배열 */
    .profile-box {
        flex-direction: column;
        align-items: flex-start;
        padding: 25px;
    }

    .profile-edit-btn {
        width: 100%;
        margin-top: 20px;
        position: static;
    }
    .profile-edit-btn button {
        width: 100%;
    }
    .dropdown {
        left: 0;
        width: 100%;
        margin-top: 8px;
        position: absolute;
    }
    
    /* 위험도 평가 카드 반응형 조정 */
    #card-risk .risk-category-inner{
        grid-template-columns: 1fr;
    }
    
    #card-risk .risk-list{
        border-right: none;
        padding-right: 0;
        margin-bottom: 15px;
    }

    /* 차트 크기 100%로 유연하게 */
    #card-risk .risk-chart-wrap{
        width: 100%;
        height: 300px;
    }
    #card-risk .risk-chart-wrap canvas{
        height: 300px !important;
    }
}

@media (max-width: 500px) {
    .profile-info h2 {
        font-size: 24px;
    }
    .visual-card h3 {
        font-size: 20px;
    }
    .visual-card.small p:first-of-type {
        font-size: 18px;
    }
}