{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë§ì¶¤ ì‚°ì¬ í†µê³„</title>
  <link rel="stylesheet" href="{% static 'CSS/stats/stats.css' %}">
</head>
<body>
{% block content %}

<div class="stats-container">

    <!-- 1. í”„ë¡œí•„ ì˜ì—­ -->
    <section class="profile-box">
        <div class="profile-left">
            <div class="profile-icon">ğŸ‘¤</div>
            <div class="profile-info">
                <h2>{{ member.m_name }} ë‹˜ì˜ í”„ë¡œí•„</h2>

                <p>
                    {{ industry.i_industry_type2 }} /
                    {{ member.m_sex }} /
                    {{ age }}ì„¸
                </p>

                <!-- ë‚˜ì˜ ì‚°ì¬ ëˆŒë €ì„ ë•Œ ë‚˜ì˜¤ëŠ” ì¶”ê°€ ìƒì„¸ ì •ë³´ -->
                <div id="injuryDetail"></div>

            </div>
        </div>

        <div class="profile-edit-btn">
            <button id="myInjuryBtn">ë‚˜ì˜ ì‚°ì¬ â–¼</button>
            <!-- ë“œë¡­ë‹¤ìš´ -->
            <ul id="injuryDropdown" class="dropdown hidden">
                {% for ind in individual_list %}
                <li data-id="{{ ind.id }}" data-title="{{ ind.i_title }}"
                    data-injury="{{ ind.i_injury }}"
                    data-disease="{{ ind.i_disease_type }}"
                    data-date="{{ ind.i_accident_date }}">
                    {{ ind.i_title }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </section>

    <!-- 2. ë¶„ì„ ê¸°ê°„ ì„ íƒ -->
    <section class="period-section">
        <h3>ë¶„ì„ ê¸°ê°„:</h3>
        <div class="period-buttons">
            <button class="period-btn" data-year="1">ìµœê·¼ 1ë…„</button>
            <button class="period-btn" data-year="2">ìµœê·¼ 2ë…„</button>
            <button class="period-btn" data-year="3">ìµœê·¼ 3ë…„</button>
        </div>
    </section>

    <!-- 3. í†µê³„ ì‹œê°í™” ì˜ì—­ -->
    <section id="stats-visual-area" class="stats-visual hidden">
        <div class="visual-grid">

            <!-- ë‚´ ì—…ì¢… ì¬í•´ìœ¨ -->
            <div class="visual-card">
                <h3>ë‚´ ì—…ì¢… ì¬í•´ìœ¨</h3>
                <p>ë‚´ì—…ì¢… ì¬í•´ í˜„í™©</p>

                <!-- JSê°€ ì±„ìš¸ ìš”ì•½ ë¬¸êµ¬ -->
                <p id="accidentSummary"></p>

                <!-- JSì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì›ì‹œ ë°ì´í„° (ìˆ¨ê¹€) -->
                <ul id="accidentList" hidden>
                    {% for row in stats_by_year %}
                    <li class="accident-item"
                        data-year="{{ row.year }}"
                        data-count="{{ row.ì¬í•´ììˆ˜ }}"
                        data-rate="{{ row.ì¬í•´ìœ¨ }}">
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <!-- ë‚´ ì—…ì¢… ì‚¬ë§ë§Œì¸ìœ¨ -->
            <div class="visual-card">
                <h3>ë‚´ ì—…ì¢… ì‚¬ë§ë§Œì¸ìœ¨</h3>
                <p>ë‚´ì—…ì¢… ì‚¬ë§ í˜„í™©</p>

                <!-- JSê°€ ì±„ìš¸ ìš”ì•½ ë¬¸êµ¬ -->
                <p id="fatalSummary"></p>

                <!-- JSì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì›ì‹œ ë°ì´í„° (ìˆ¨ê¹€) -->
                <ul id="fatalList" hidden>
                    {% for row in stats_by_year %}
                    <li class="fatal-item"
                        data-year="{{ row.year }}"
                        data-count="{{ row.ì‚¬ë§ììˆ˜ }}"
                        data-rate="{{ row.ì‚¬ë§ë§Œì¸ìœ¨ }}">
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="visual-card">ì¬í•´ ìœ í˜•</div>
            <div class="visual-card">ì‚¬ë§ ìœ í˜•</div>
            <div class="visual-card">ë‚¨/ë…€ ì¬í•´ í˜„í™©</div>
            <div class="visual-card">ë‚¨/ë…€ ì‚¬ë§ í˜„í™©</div>
            <div class="visual-card">ì—°ë ¹ëŒ€ë³„ ì¬í•´ í˜„í™©</div>
            <div class="visual-card">ì—°ë ¹ëŒ€ë³„ ì‚¬ë§ í˜„í™©</div>
            <div class="visual-card">ì¬í•´ ì§ˆë³‘ ìœ í˜•</div>
            <div class="visual-card">ì¬í•´ ì§ˆë³‘ ì‚¬ë§ í˜„í™©</div>
            <div class="visual-card highlight">ì¢…í•© ìœ„í—˜ë„ í‰ê°€</div>
        </div>
    </section>

</div>

<script src="{% static 'js/stats/stats.js' %}"></script>
{% endblock %}
</body>
</html>
